import{r as v,j as e,af as H,ag as U,ah as q,ai as Z,aj as _,ak as K,al as J,am as Q,an as ee}from"./vendor-BU0pAdt4.js";import"./three-vendor-BDja88sP.js";const se=({asteroid:t,deflectionAngle:a,deflectionPower:c,effectiveness:h,onProgress:d})=>{const g=v.useRef(null),[f,u]=v.useState({x:20,y:0}),[x,s]=v.useState(!1),[l,p]=v.useState({x:0,y:0}),[o,i]=v.useState({x:400,y:-200,z:300}),[N,j]=v.useState(!1),[D,S]=v.useState([]);v.useEffect(()=>{let r=0;const m=setInterval(()=>{if(r+=.02,r>=1){clearInterval(m),d(1);return}d(r);const n=h*a*c/100,w=0,L=0,B=0,F=400*(1-r)+(w+n*5)*r,R=-200*(1-r)+(L-n*3)*r,b=300*(1-r)+(B+n*8)*r;if(i({x:F,y:R,z:b}),r>.2&&r<.8){if(j(!0),Math.random()>.7){const y={id:Date.now()+Math.random(),x:F,y:R,vx:(Math.random()-.5)*10,vy:(Math.random()-.5)*10};S(M=>[...M.slice(-20),y])}}else j(!1);u(y=>({...y,y:y.y+.5}))},50);return()=>clearInterval(m)},[h,a,c,d]),v.useEffect(()=>{const r=setInterval(()=>{S(m=>m.map(n=>({...n,x:n.x+n.vx,y:n.y+n.vy,vx:n.vx*.95,vy:n.vy*.95})).filter(n=>Math.abs(n.vx)>.1||Math.abs(n.vy)>.1))},50);return()=>clearInterval(r)},[]);const E=r=>{s(!0),p({x:r.clientX,y:r.clientY})},$=r=>{if(!x)return;const m=r.clientX-l.x,n=r.clientY-l.y;u(w=>({x:Math.max(-90,Math.min(90,w.x-n*.5)),y:w.y+m*.5})),p({x:r.clientX,y:r.clientY})},P=()=>s(!1),T={small:20,medium:40,large:70,massive:100}[t.size];return e.jsxs("div",{ref:g,className:"w-full h-full relative overflow-hidden cursor-move select-none",onMouseDown:E,onMouseMove:$,onMouseUp:P,onMouseLeave:P,style:{background:"radial-gradient(ellipse at center, #0a0a1a 0%, #000 100%)"},children:[e.jsx("div",{className:"absolute inset-0",children:Array.from({length:100}).map((r,m)=>e.jsx("div",{className:"absolute rounded-full bg-white",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,opacity:Math.random()*.8+.2}},m))}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{perspective:"1000px",perspectiveOrigin:"center center"},children:e.jsxs("div",{style:{transformStyle:"preserve-3d",transform:`rotateX(${f.x}deg) rotateY(${f.y}deg)`,transition:x?"none":"transform 0.3s ease-out"},children:[e.jsx("div",{className:"absolute rounded-full",style:{width:"150px",height:"150px",background:"radial-gradient(circle at 30% 30%, #4a9eff, #1e5ba8, #0a2e5c)",boxShadow:`
                inset -20px -20px 50px rgba(0,0,0,0.5),
                0 0 50px rgba(74,158,255,0.5),
                0 0 100px rgba(74,158,255,0.3)
              `,transform:"translate(-50%, -50%)",left:"50%",top:"50%"}}),e.jsx("div",{className:"absolute rounded-full",style:{width:`${T}px`,height:`${T}px`,background:"radial-gradient(circle at 40% 40%, #8b6f47, #5c4a3a, #2a1f1a)",boxShadow:"inset -10px -10px 30px rgba(0,0,0,0.8), 0 0 20px rgba(255,100,100,0.5)",transform:`translate3d(${o.x}px, ${o.y}px, ${o.z}px)`,left:"50%",top:"50%",transition:"transform 0.05s linear"}}),N&&e.jsx("div",{className:"absolute",style:{width:"4px",height:`${Math.sqrt(o.x**2+o.y**2+o.z**2)}px`,background:"linear-gradient(to bottom, #a855f7, transparent)",boxShadow:"0 0 20px #a855f7",transform:`translate3d(0,0,0) rotateZ(${Math.atan2(o.y,o.x)*180/Math.PI}deg) rotateY(${Math.atan2(o.z,Math.sqrt(o.x**2+o.y**2))*180/Math.PI}deg)`,left:"50%",top:"50%",transformOrigin:"top center"}}),D.map(r=>e.jsx("div",{className:"absolute rounded-full",style:{width:"4px",height:"4px",background:"#a855f7",boxShadow:"0 0 10px #a855f7",transform:`translate3d(${r.x}px, ${r.y}px, 0)`,left:"50%",top:"50%",opacity:.8}},r.id))]})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-white text-xs bg-black/50 backdrop-blur p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"🖱️ Drag to rotate • 🔍 Scroll to zoom"}),e.jsx("span",{className:"text-purple-300",children:"3D Simulation Active"})]})})]})},te=({asteroid:t,deflectionAngle:a,deflectionPower:c,effectiveness:h,onProgress:d})=>{const g=v.useRef(null),[f,u]=v.useState(0);return v.useEffect(()=>{const x=g.current;if(!x)return;const s=x.getContext("2d");if(!s)return;x.width=x.offsetWidth,x.height=x.offsetHeight;let l=0,p;const o=x.width/2,i=x.height/2,N=60,j=x.width-100,D=100,S={small:8,medium:15,large:25,massive:40}[t.size],E=h*a*c/100,$=()=>{l+=.008,l>=1?(l=1,d(1)):d(l),u(l),s.fillStyle="#000",s.fillRect(0,0,x.width,x.height);for(let b=0;b<80;b++){const y=b*137.5%x.width,M=b*234.7%x.height;s.fillStyle=`rgba(255, 255, 255, ${.3+Math.random()*.4})`,s.fillRect(y,M,2,2)}const P=s.createRadialGradient(o-15,i-15,0,o,i,N);P.addColorStop(0,"#6bb6ff"),P.addColorStop(.5,"#2e7dd6"),P.addColorStop(1,"#0a3d7a"),s.fillStyle=P,s.beginPath(),s.arc(o,i,N,0,Math.PI*2),s.fill(),s.strokeStyle="rgba(74, 158, 255, 0.4)",s.lineWidth=8,s.beginPath(),s.arc(o,i,N+10,0,Math.PI*2),s.stroke(),s.strokeStyle="rgba(100, 200, 100, 0.3)",s.lineWidth=2,s.setLineDash([5,5]),s.beginPath(),s.arc(o,i,N+80,0,Math.PI*2),s.stroke(),s.setLineDash([]);const T=o-E*3,r=i-E*2,m=j+(T-j)*l,n=D+(r-D)*l;if(s.strokeStyle="rgba(255, 100, 100, 0.4)",s.lineWidth=2,s.beginPath(),s.moveTo(j,D),s.lineTo(T,r),s.stroke(),l>.2&&l<.8){const b=s.createLinearGradient(o,i,m,n);b.addColorStop(0,"rgba(168, 85, 247, 0.8)"),b.addColorStop(1,"rgba(168, 85, 247, 0)"),s.strokeStyle=b,s.lineWidth=4,s.beginPath(),s.moveTo(o,i),s.lineTo(m,n),s.stroke(),s.shadowColor="#a855f7",s.shadowBlur=20,s.stroke(),s.shadowBlur=0;for(let y=0;y<5;y++){const M=(l*5-y*.1)%1;if(M>0&&M<1){const X=o+(m-o)*M,Y=i+(n-i)*M;s.fillStyle=`rgba(168, 85, 247, ${1-M})`,s.beginPath(),s.arc(X,Y,3,0,Math.PI*2),s.fill()}}}const w=s.createRadialGradient(m-S*.3,n-S*.3,0,m,n,S);if(w.addColorStop(0,"#8b6f47"),w.addColorStop(.6,"#5c4a3a"),w.addColorStop(1,"#2a1f1a"),s.fillStyle=w,s.beginPath(),s.arc(m,n,S,0,Math.PI*2),s.fill(),l>.5){const b=(l-.5)*2;s.strokeStyle=`rgba(255, 100, 100, ${b*.6})`,s.lineWidth=3,s.beginPath(),s.arc(m,n,S+5,0,Math.PI*2),s.stroke()}const L=t.speed*3;s.strokeStyle="rgba(255, 200, 100, 0.6)",s.lineWidth=2,s.beginPath(),s.moveTo(m,n),s.lineTo(m+(T-m)/50*L,n+(r-n)/50*L),s.stroke();const B=Math.sqrt((m-o)**2+(n-i)**2);s.strokeStyle="rgba(255, 255, 255, 0.3)",s.lineWidth=1,s.setLineDash([3,3]),s.beginPath(),s.moveTo(m,n),s.lineTo(o,i),s.stroke(),s.setLineDash([]),s.fillStyle="rgba(255, 255, 255, 0.8)",s.font="12px monospace";const F=(m+o)/2,R=(n+i)/2;s.fillText(`${Math.round(B)} px`,F+10,R),l<1&&(p=requestAnimationFrame($))};return p=requestAnimationFrame($),()=>{p&&cancelAnimationFrame(p)}},[t,a,c,h,d]),e.jsxs("div",{className:"w-full h-full relative",children:[e.jsx("canvas",{ref:g,className:"w-full h-full",style:{background:"radial-gradient(ellipse at center, #0a0a1a 0%, #000 100%)"}}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-white text-xs bg-black/50 backdrop-blur p-3 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Progress"}),e.jsxs("div",{className:"text-purple-300 font-bold",children:[(f*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Deflection"}),e.jsxs("div",{className:"text-blue-300 font-bold",children:[a.toFixed(1),"°"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-400",children:"Power"}),e.jsxs("div",{className:"text-green-300 font-bold",children:[c,"%"]})]})]})})]})},C=({children:t,className:a=""})=>e.jsx("div",{className:`bg-black/70 backdrop-blur rounded-xl border border-white/10 p-4 ${a}`,children:t}),I=({children:t,className:a=""})=>e.jsx("div",{className:`pb-2 ${a}`,children:t}),z=({children:t,className:a=""})=>e.jsx("h4",{className:`text-lg font-semibold ${a}`,children:t}),A=({children:t,className:a=""})=>e.jsx("div",{className:a,children:t}),k=({children:t,className:a="",variant:c="default",...h})=>{const d="px-3 py-2 rounded-md text-sm font-medium transition",g=c==="default"?"bg-purple-600 hover:bg-purple-700 text-white":c==="outline"?"border border-white/10 bg-transparent text-white":"bg-gray-700 text-white";return e.jsx("button",{className:`${d} ${g} ${a}`,...h,children:t})},G=({children:t,className:a=""})=>e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs border ${a}`,children:t}),W=({value:t=0,className:a=""})=>e.jsx("div",{className:`w-full bg-white/10 rounded-full h-2 ${a}`,children:e.jsx("div",{style:{width:`${t}%`},className:"h-2 rounded-full bg-purple-500 transition-all"})}),O=[{id:1,size:"small",speed:5,distance:1e6,mass:5e5,composition:"rocky",trajectory:"direct",name:"Apophis-Mini"},{id:2,size:"medium",speed:8,distance:8e5,mass:2e6,composition:"metallic",trajectory:"curved",name:"Bennu-Class"},{id:3,size:"large",speed:12,distance:6e5,mass:8e6,composition:"icy",trajectory:"erratic",name:"Dimorphos-Type"},{id:4,size:"massive",speed:15,distance:4e5,mass:2e7,composition:"metallic",trajectory:"direct",name:"Chicxulub-Danger"}],V={kinetic:{name:"Kinetic Impactor",icon:Q,description:"High-speed spacecraft collision",effectiveness:{rocky:.8,metallic:.6,icy:.9},realWorld:"NASA's DART mission used this method on Dimorphos",power:100},gravity:{name:"Gravity Tractor",icon:J,description:"Gravitational deflection over time",effectiveness:{rocky:.4,metallic:.4,icy:.4},realWorld:"Best for small course corrections with years of advance warning",power:50},nuclear:{name:"Nuclear Device",icon:K,description:"Nuclear explosion for major deflection",effectiveness:{rocky:.9,metallic:.7,icy:1},realWorld:"Theoretical last resort for short warning times",power:200},laser:{name:"Laser Ablation",icon:_,description:"Vaporize surface material for thrust",effectiveness:{rocky:.6,metallic:.3,icy:.8},realWorld:"Proposed for small asteroids",power:75}};function ae({asteroid:t}){const a={small:1,medium:2.5,large:5,massive:10},c=t.size==="massive"?"EXTINCTION":t.size==="large"?"REGIONAL":t.size==="medium"?"LOCAL":"MINOR",h=t.size==="massive"?"text-red-500":t.size==="large"?"text-orange-500":t.size==="medium"?"text-yellow-500":"text-green-500";return e.jsxs(C,{className:"bg-black/80 border-purple-500 text-white",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-5 w-5 text-orange-500"}),e.jsx(z,{className:"text-lg",children:t.name})]})}),e.jsxs(A,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Size:"}),e.jsx("span",{className:"ml-2 font-semibold text-purple-300",children:t.size})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Speed:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[t.speed.toFixed(1)," km/s"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Distance:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[(t.distance/1e3).toFixed(0),"k km"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Mass:"}),e.jsxs("span",{className:"ml-2 font-semibold",children:[(t.mass/1e6).toFixed(1),"M tons"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(G,{className:"text-xs",children:[" ",t.composition," composition"," "]}),e.jsxs(G,{className:`text-xs ${h} border-current`,children:[" ",c," THREAT"," "]})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[e.jsx("span",{className:"text-purple-300",children:"Trajectory:"})," ",t.trajectory," approach"]}),e.jsxs("div",{className:"text-xs text-gray-300 bg-gray-900/50 p-2 rounded",children:[e.jsx(Z,{className:"h-3 w-3 inline mr-1"}),"Diameter: ~",(a[t.size]*100).toFixed(0),"m"]})]})]})}function le({gameState:t,effectiveness:a}){const c=t.currentAsteroid,h=t.power/100,d=Math.max(0,1-Math.abs(t.angle-22.5)/22.5),g={small:1,medium:.8,large:.6,massive:.4}[c.size],f=Math.max(.3,1-(c.speed-5)/20),u=Math.min(1.5,c.distance/5e5),x=a*h*d*g*f*u,s=Math.min(99,Math.max(1,x*100)),l=s>=80?"EXCELLENT":s>=60?"GOOD":s>=40?"FAIR":s>=20?"POOR":"CRITICAL",p=s>=80?"text-green-400":s>=60?"text-blue-400":s>=40?"text-yellow-400":s>=20?"text-orange-400":"text-red-400";return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Success Probability:"}),e.jsxs("span",{className:`text-sm font-bold ${p}`,children:[s.toFixed(1),"%"]})]}),e.jsx(W,{value:s,className:"h-2"}),e.jsx("div",{className:`text-xs font-semibold ${p}`,children:l}),e.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[e.jsxs("div",{children:["• Power efficiency: ",(h*100).toFixed(0),"%"]}),e.jsxs("div",{children:["• Angle optimization: ",(d*100).toFixed(0),"%"]}),e.jsxs("div",{children:["• Size challenge: ",(g*100).toFixed(0),"%"]}),e.jsxs("div",{children:["• Speed factor: ",(f*100).toFixed(0),"%"]})]})]})}function ie({gameState:t,onMethodChange:a,onPowerChange:c,onAngleChange:h}){const d=V[t.deflectionMethod],g=t.currentAsteroid,f=d.effectiveness[g.composition];return e.jsxs(C,{className:"bg-black/80 border-purple-500 text-white",children:[e.jsx(I,{children:e.jsx(z,{className:"text-lg",children:"Deflection System"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-300",children:"Deflection Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(V).map(([u,x])=>{const s=x.icon,l=t.deflectionMethod===u;return e.jsxs("button",{onClick:()=>a(u),className:`p-3 flex flex-col items-center gap-1 text-xs rounded-md border transition ${l?"bg-purple-600 border-purple-400":"border-purple-500 bg-transparent hover:bg-purple-900/30"} `,children:[e.jsx(s,{className:"h-4 w-4"}),e.jsx("span",{children:x.name})]},u)})})]}),e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded text-xs space-y-2",children:[e.jsx("div",{className:"font-semibold text-purple-300",children:d.description}),e.jsxs("div",{className:"text-gray-300",children:[e.jsxs("span",{className:"text-yellow-400",children:["Effectiveness vs ",g.composition,":"]})," ",(f*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-gray-400 italic",children:d.realWorld})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-300",children:"Power Output"}),e.jsxs("span",{className:"text-sm",children:[t.power,"%"]})]}),e.jsx("input",{type:"range",min:"10",max:d.power,value:t.power,onChange:u=>c(parseInt(u.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg accent-purple-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-300",children:"Deflection Angle"}),e.jsxs("span",{className:"text-sm",children:[t.angle.toFixed(1),"°"]})]}),e.jsx("input",{type:"range",min:"0",max:"45",step:"0.5",value:t.angle,onChange:u=>h(parseFloat(u.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg accent-purple-500"})]}),e.jsxs("div",{className:"bg-gray-900/50 p-3 rounded",children:[e.jsx("div",{className:"text-sm font-semibold text-purple-300 mb-2",children:"Mission Analysis"}),e.jsx(le,{gameState:t,effectiveness:f})]})]})]})}function re({gameState:t}){return e.jsxs(C,{className:"bg-black/80 border-purple-500 text-white",children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-yellow-500"}),e.jsx(z,{className:"text-lg",children:"Mission Stats"})]})}),e.jsxs(A,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-300",children:t.level}),e.jsx("div",{className:"text-xs text-gray-400",children:"Level"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.score}),e.jsx("div",{className:"text-xs text-gray-400",children:"Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.asteroidsSaved}),e.jsx("div",{className:"text-xs text-gray-400",children:"Saved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.lives}),e.jsx("div",{className:"text-xs text-gray-400",children:"Lives"})]})]}),t.achievements.length>0&&e.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3",children:[e.jsx("div",{className:"text-sm font-semibold text-purple-300 mb-2",children:"Recent Achievement"}),e.jsx(G,{className:"bg-yellow-600 text-yellow-100 text-xs",children:t.achievements[t.achievements.length-1]})]})]})]})}function ne({gameState:t,onComplete:a}){const[c,h]=v.useState(0),d=t.currentAsteroid,g=V[t.deflectionMethod],f=g.effectiveness[d.composition],u=v.useCallback(x=>{if(h(x),x>=1){const s=t.power/100,l=Math.max(0,1-Math.abs(t.angle-22.5)/22.5),p={small:1,medium:.8,large:.6,massive:.4}[d.size],o=Math.max(.3,1-(d.speed-5)/20),i=Math.min(1.5,d.distance/5e5),N=f*s*l*p*o*i,D=N*t.angle>=15&&N>.5;setTimeout(()=>a(D),500)}},[f,t.power,t.angle,d,a]);return e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[t.use3DView?e.jsx("div",{className:"absolute inset-0 pointer-events-auto",children:e.jsx(se,{asteroid:d,deflectionAngle:t.angle,deflectionPower:t.power,effectiveness:f,onProgress:u})}):e.jsx("div",{className:"absolute inset-0 pointer-events-auto",children:e.jsx(te,{asteroid:d,deflectionAngle:t.angle,deflectionPower:t.power,effectiveness:f,onProgress:u})}),e.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-black/90 border border-purple-500 rounded-lg p-4 min-w-[320px] pointer-events-auto z-10",children:[e.jsxs("div",{className:"text-white text-center mb-3",children:[e.jsx("div",{className:"text-lg font-semibold text-purple-300",children:"Mission in Progress"}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Method: ",g.name]})]}),e.jsx(W,{value:c*100,className:"h-3 mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-300",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-purple-300",children:"View Mode"}),e.jsx("div",{children:t.use3DView?"3D Interactive":"2D Trajectory"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-purple-300",children:"Effectiveness"}),e.jsxs("div",{children:[(f*100).toFixed(0),"%"]})]})]}),c>.5&&e.jsx("div",{className:"mt-3 text-center",children:e.jsx("div",{className:"text-sm font-semibold text-yellow-400",children:"DEFLECTION IN PROGRESS..."})})]})]})}function de(){const[t,a]=v.useState({level:1,score:0,lives:3,asteroidsSaved:0,currentAsteroid:O[0],deflectionMethod:"kinetic",power:50,angle:15,isSimulating:!1,showTutorial:!0,achievements:[],asteroidPosition:{x:50,y:20,z:-30},use3DView:!0,showDeflectionBeam:!1}),[c,h]=v.useState(null),d=v.useCallback(s=>{const l=O[Math.min(s-1,O.length-1)],p=.2;return{...l,id:Date.now(),speed:l.speed*(1+(Math.random()-.5)*p),distance:l.distance*(1+(Math.random()-.5)*p),mass:l.mass*(1+(Math.random()-.5)*p),composition:["rocky","metallic","icy"][Math.floor(Math.random()*3)],trajectory:["direct","curved","erratic"][Math.floor(Math.random()*3)],name:l.name}},[]),g=()=>{a(s=>({...s,isSimulating:!0,showTutorial:!1}))},f=s=>{a(i=>{const N=s?i.level*100+i.power:0,j=[...i.achievements];return s&&(i.asteroidsSaved===0&&j.push("First Save!"),i.power>=90&&j.push("Full Power!"),i.angle<=5&&j.push("Precision Shot!")),{...i,isSimulating:!1,score:i.score+N,lives:s?i.lives:i.lives-1,asteroidsSaved:s?i.asteroidsSaved+1:i.asteroidsSaved,level:s?i.level+1:i.level,achievements:j,currentAsteroid:s?d(i.level+1):i.currentAsteroid}});const l={success:["Asteroid successfully deflected! Earth is safe!","Mission accomplished! The asteroid missed Earth!","Excellent work! Another catastrophe averted!","Perfect deflection! Humanity lives another day!"],failure:["Impact detected! The asteroid hit Earth!","Mission failed! Better luck next time!","The deflection wasn't enough. Try adjusting your approach!","Earth was hit! Learn from this and try again!"]},p=s?l.success:l.failure,o=p[Math.floor(Math.random()*p.length)];h({success:s,message:o})},u=()=>{a({level:1,score:0,lives:3,asteroidsSaved:0,currentAsteroid:O[0],deflectionMethod:"kinetic",power:50,angle:15,isSimulating:!1,showTutorial:!0,achievements:[],asteroidPosition:{x:50,y:20,z:-30},use3DView:!0,showDeflectionBeam:!1}),h(null)},x=()=>{h(null)};return t.lives<=0?e.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center",children:e.jsxs(C,{className:"bg-black/80 border-red-500 text-white max-w-md mx-4",children:[e.jsx(I,{children:e.jsx(z,{className:"text-center text-2xl text-red-400",children:"GAME OVER"})}),e.jsxs(A,{className:"text-center space-y-4",children:[e.jsxs("div",{className:"text-lg",children:["Final Score:"," ",e.jsx("span",{className:"text-purple-300 font-bold",children:t.score})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:["Asteroids Saved: ",t.asteroidsSaved]}),e.jsxs("div",{className:"text-sm text-gray-300",children:["Highest Level: ",t.level]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx(k,{onClick:u,className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Play Again"}),e.jsx(k,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:"Main Menu"})]})]})]})}):e.jsxs("div",{className:"bg-black  mx-auto px-6 sm:px-12 lg:px-20 py-12 relative min-h-screen overflow-hidden text-white",children:[e.jsxs("div",{className:`absolute left-6 top-0 bottom-6 w-80 overflow-y-auto z-20 space-y-4\r
             scrollbar-thin scrollbar-thumb-purple-500 scrollbar-track-gray-900/30\r
             p-4`,children:[e.jsx(ae,{asteroid:t.currentAsteroid}),e.jsx(ie,{gameState:t,onMethodChange:s=>a(l=>({...l,deflectionMethod:s})),onPowerChange:s=>a(l=>({...l,power:s})),onAngleChange:s=>a(l=>({...l,angle:s}))}),e.jsx(C,{className:"bg-black/80 border-purple-500 text-white",children:e.jsxs(A,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"text-sm font-semibold text-purple-300",children:"Simulation Mode"}),e.jsx(G,{className:"text-xs",children:t.use3DView?"3D":"2D"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{onClick:()=>a(s=>({...s,use3DView:!0})),variant:t.use3DView?"default":"secondary",className:"flex-1",disabled:t.isSimulating,children:[e.jsx(H,{className:"h-4 w-4 mr-1 inline"})," 3D View"]}),e.jsxs(k,{onClick:()=>a(s=>({...s,use3DView:!1})),variant:t.use3DView?"secondary":"default",className:"flex-1",disabled:t.isSimulating,children:[e.jsx(U,{className:"h-4 w-4 mr-1 inline"})," 2D View"]})]}),t.use3DView&&e.jsx("div",{className:"mt-3 text-xs text-gray-400",children:"• Drag to rotate camera • Scroll to zoom"})]})}),e.jsx(k,{onClick:g,disabled:t.isSimulating,className:"w-full h-14 text-xl font-bold bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:t.isSimulating?"DEFLECTING...":"LAUNCH MISSION"})]}),e.jsx("div",{className:"absolute right-6 top-0 w-64 z-20",children:e.jsx(re,{gameState:t})}),e.jsx("div",{className:"absolute inset-0",children:t.isSimulating&&e.jsx(ne,{gameState:t,onComplete:f,onStateUpdate:s=>a(l=>({...l,...s}))})}),t.showTutorial&&e.jsx("div",{className:"absolute inset-0 bg-black/90 z-50 flex items-center justify-center",children:e.jsxs(C,{className:"max-w-2xl mx-4",children:[e.jsx(I,{children:e.jsx(z,{className:"text-center text-2xl",children:"Mission Briefing: Planetary Defense"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("p",{children:"Welcome to Earth's planetary defense system. An asteroid is approaching and you must deflect it!"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-purple-300",children:"Your Tools:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-300",children:[e.jsx("li",{children:"• Kinetic Impactor — ram a spacecraft into the asteroid"}),e.jsx("li",{children:"• Gravity Tractor — use gravitational pull to slowly change course"}),e.jsx("li",{children:"• Nuclear Device — last resort for maximum deflection power"}),e.jsx("li",{children:"• Laser Ablation — vaporize surface material to create thrust"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-purple-300",children:"Strategy Tips:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-gray-300",children:[e.jsx("li",{children:"• Different compositions respond differently to methods"}),e.jsx("li",{children:"• Larger asteroids need more power and optimal angles"}),e.jsx("li",{children:"• Earlier detection gives better chances"}),e.jsx("li",{children:"• Aim for 15+ degree deflection for guaranteed success"})]})]}),e.jsx(k,{onClick:()=>a(s=>({...s,showTutorial:!1})),className:"w-full bg-purple-600 hover:bg-purple-700",children:"Begin Mission"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:e.jsxs(C,{className:`${c.success?"border-green-500":"border-red-500"} bg-black/90 text-white max-w-md mx-4`,children:[e.jsx(I,{children:e.jsx(z,{className:`text-center text-2xl ${c.success?"text-green-400":"text-red-400"}`,children:c.success?"MISSION SUCCESS!":"MISSION FAILED!"})}),e.jsxs(A,{className:"space-y-4 text-center",children:[e.jsx("p",{className:"text-lg",children:c.message}),c.success&&e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsxs("div",{children:["Points Earned:"," ",e.jsxs("span",{className:"text-purple-300 font-bold",children:["+",t.level*100+t.power]})]}),e.jsxs("div",{children:["Next Level:"," ",e.jsx("span",{className:"text-blue-300 font-bold",children:t.level})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx(k,{onClick:c.success?x:()=>h(null),className:"flex-1 bg-purple-600 hover:bg-purple-700",children:c.success?"Next Level":"Try Again"}),e.jsx(k,{onClick:()=>window.location.reload(),variant:"outline",className:"flex-1",children:"Main Menu"})]})]})]})})]})}export{de as default};
